<h3> Monitoring > Issues >
    <ins *ngIf="isAddMode">Add</ins>
    <ins *ngIf="!isAddMode">Edit</ins>
</h3>

<div class="container">
    <form [formGroup]="form" class="form">
        <!--PARENT (Issue)-->
        <mat-form-field>
            <mat-label>Issue</mat-label>
            <input matInput formControlName="parent">
            <mat-error *ngIf="f['parent']?.invalid && f['parent']?.touched">
                <span *ngIf="f['parent']?.hasError('required')">This field is mandatory.</span>
            </mat-error>
        </mat-form-field>
        <!--STATE-->
        <mat-form-field>
            <mat-label>State</mat-label>
            <mat-select formControlName="state" placeholder="Select an state">
                <mat-option value="ASSIGNED">ASSIGNED</mat-option>
                <mat-option value="UNASSIGNED">UNASSIGNED</mat-option>
            </mat-select>
        </mat-form-field>
        <!--STATUS-->
        <mat-form-field>
            <mat-label>Status</mat-label>
            <mat-select formControlName="status" placeholder="Select an status">
                <mat-option value="OK">OK</mat-option>
                <mat-option value="INIT">INIT</mat-option>
            </mat-select>
        </mat-form-field>
        <!--TYPE-->
        <mat-form-field>
            <mat-label>Type</mat-label>
            <input matInput formControlName="type">
            <mat-error *ngIf="f['value']?.invalid && f['value']?.touched">
                <span *ngIf="f['value']?.hasError('required')">This field is mandatory.</span>
            </mat-error>
        </mat-form-field>
        <!--Subtype-->
        <mat-form-field>
            <mat-label>Sub Type</mat-label>
            <input matInput formControlName="subtype">
            <mat-error *ngIf="f['value']?.invalid && f['value']?.touched">
                <span *ngIf="f['value']?.hasError('required')">This field is mandatory.</span>
            </mat-error>
        </mat-form-field>
        <!--level-->
        <mat-form-field>
            <mat-label>Level</mat-label>
            <input matInput formControlName="level">
            <mat-error *ngIf="f['value']?.invalid && f['value']?.touched">
                <span *ngIf="f['value']?.hasError('required')">This field is mandatory.</span>
            </mat-error>
        </mat-form-field>
        <!--description-->
        <mat-form-field>
            <mat-label>Description</mat-label>
            <input matInput formControlName="description">
            <mat-error *ngIf="f['value']?.invalid && f['value']?.touched">
                <span *ngIf="f['value']?.hasError('required')">This field is mandatory.</span>
            </mat-error>
        </mat-form-field>
        <!--LONGITUDE-->
        <mat-form-field>
            <mat-label>Longitude</mat-label>
            <input matInput formControlName="longitude">
            <mat-error *ngIf="f['longitude']?.invalid && f['longitude']?.touched">
                <span *ngIf="f['longitude']?.hasError('required')">This field is mandatory.</span>
                <span *ngIf="f['longitude']?.hasError('pattern')">This field is invalid.</span>
            </mat-error>
        </mat-form-field>
        <!--LATITUDE-->
        <mat-form-field>
            <mat-label>Latitude</mat-label>
            <input matInput formControlName="latitude">
            <mat-error *ngIf="f['latitude']?.invalid && f['latitude']?.touched">
                <span *ngIf="f['latitude']?.hasError('required')">This field is mandatory.</span>
                <span *ngIf="f['latitude']?.hasError('pattern')">This field is invalid.</span>
            </mat-error>
        </mat-form-field>
        <!--RADIUS-->
        <mat-form-field>
            <mat-label>Radius</mat-label>
            <input matInput formControlName="radius">
            <mat-error *ngIf="f['radius']?.invalid && f['radius']?.touched">
                <span *ngIf="f['radius']?.hasError('required')">This field is mandatory.</span>
                <span *ngIf="f['radius']?.hasError('pattern')">This field must be between 0-999</span>
            </mat-error>
        </mat-form-field>
        <!--ALTITUD-->
        <mat-form-field>
            <mat-label>Altitude</mat-label>
            <input matInput formControlName="altitude">
            <mat-error *ngIf="f['altitude']?.invalid && f['altitude']?.touched">
                <span *ngIf="f['altitude']?.hasError('required')">This field is mandatory.</span>
                <span *ngIf="f['altitude']?.hasError('pattern')">This field must be between 0-999</span>
            </mat-error>
        </mat-form-field>
        <!--OPERATOR-->
        <mat-form-field>
            <mat-label>Operator Id</mat-label>
            <input matInput formControlName="operatorId">
            <mat-error *ngIf="f['operatorId']?.invalid && f['operatorId']?.touched">
                <span *ngIf="f['operatorId']?.hasError('required')">This field is mandatory.</span>
            </mat-error>
        </mat-form-field>
        <!--TASK ID-->
        <mat-form-field>
            <mat-label>Task Id</mat-label>
            <input matInput formControlName="taskId">
            <mat-error *ngIf="f['taskId']?.invalid && f['taskId']?.touched">
                <span *ngIf="f['taskId']?.hasError('required')">This field is mandatory.</span>
            </mat-error>
        </mat-form-field>
        <!--RELATE TO (OPERATION)-->
        <a routerLink="/management/operations" routerLinkActive="active"><span class="text-colour">Add a new
                operation</span></a>
        <mat-form-field>
            <mat-label>Select an operation</mat-label>
            <mat-select formControlName="relatesTo" placeholder="Select a operation">
                <mat-option #matOption *ngFor="let operation of operations$ | async" [value]="operation.name">
                    {{operation.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>
        <!--DEVICE ID-->
        <a routerLink="/resources/devices" routerLinkActive="active"><span class="text-colour">Add a new
                devices</span></a>
        <mat-form-field>
            <mat-label>Select a device</mat-label>
            <mat-select formControlName="deviceId" placeholder="Select a device">
                <mat-option #matOption *ngFor="let device of devices$ | async" [value]="device.name">
                    {{device.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>
        <!--FLIGHT ID-->
        <a routerLink="/management/flights" routerLinkActive="active"><span class="text-colour">Add a new
                flight</span></a>
        <mat-form-field>
            <mat-label>Select a flight</mat-label>
            <mat-select formControlName="flightId" placeholder="Select a flight">
                <mat-option #matOption *ngFor="let flight of flights$ | async" [value]="flight.name">
                    {{flight.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>
        <!--FLIGHT PATH-->
        <a routerLink="/resources/paths" routerLinkActive="active"><span class="text-colour">Add a new
                Path</span></a>
        <mat-form-field>
            <mat-label>Select a path</mat-label>
            <mat-select formControlName="flightPath" placeholder="Select a flight">
                <mat-option #matOption *ngFor="let path of paths$ | async" [value]="path.name">
                    {{path.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>


        <!--Create Button-->
        <button *ngIf="!isAddMode" mat-flat-button color="primary" (click)="update()">Update</button>
        <button *ngIf="isAddMode" mat-flat-button color="primary" (click)="create()">Add</button>
    </form>
</div>